{% extends 'layout.html'%}

{% block title %} patient file {% endblock %}

{% block body %}
<nav class="index_nav" >
    <div >
      <a class="navbar-brand" href="#">
        <img src="/static/dental_manager_logo-removebg-preview.png" alt="" width="300" height=auto>
      </a>
    </div>
    <div>
        <button><a href="/admin_panil">admin panil</a></button>
        
    </div>
</nav>
<section>

<h1>patient personal information</h1>

<table class="table table-striped">
    <tr>
      <th>id</th>
      <th>patient name</th>
      <th>gender</th>
      <th>birth year</th>
      <th>adress</th>
      <th>phonr number</th>
      <th>email</th>
      <th>medical_history</th>


    </tr>
    {% for patient in patient_info %}
        {% if patient['name'] == selected_patient_name:%}
            <tr>
            <td>{{ patient['id'] }}</td>
            <td>{{ patient['name'].strip('0123456789') }}</td>
            <td>{{ patient['gender'] }}</td>
            <td>{{ patient['birth_year'] }}</td>
            <td>{{ patient['adress'] }}</td>
            <td>{{ patient['phone_number'] }}</td>
            <td>{{ patient['email'] }}</td>
            <td>{{ patient['medical_history'] }}</td>

        {% endif %}
        </tr>
    {% endfor %}
  </table>


</section>

<form name= 'name_form'action="/diagnosis" method="get">
    <input type="hidden" name="patient_name" value="{{selected_patient_name}}">
    <input type="submit" value="add diagnosis">
</form>

<section>
    <h1>TODO procedures</h1>
    <table class="table table-striped">
        <tr>
          <th>id</th>
          <th>patient id</th>
          <th>operator</th>
          <th>procedure type</th>
          <th>tooth</th>
          <th>procedure date</th>
          <th>price</th>
          <th>description</th>
    
        </tr>
        {% for procedure in procedure_info %}
            {% if procedure['patient_name'] == selected_patient_name:%}
                <tr>
                <td>{{ procedure['id'] }}</td>
                <td>{{ procedure['patient_name'].strip('0123456789') }}</td>

                {% for operator in operator_info: %}
                    {% if operator['id'] == procedure['operator_id']:%}
                <td>{{ operator['name'] }}</td>
                    {% endif %}
                {% endfor %}

                <td>{{ procedure['procedure_type'] }}</td>
                <td>{{ procedure['tooth'] }}</td>
                <td>{{ procedure['procedure_date'] }}</td>
                <td>{{ procedure['price'] }}</td>
                <td>{{ procedure['description'] }}</td>

            {% endif %}
            </tr>
        {% endfor %}
      </table>

</section>

<section>
<!--if procedure
        procedure added succesfully <btn>add new procedure</btn>(direct to the same page)
    else
        procedure form-->
    <h1>add new procedure</h1>

    
    
    
    
    <!--a href="/added_procedure"><button>add new procedure</button></a-->
    <form action="/added_procedure" method="post">
        {{hidden_form.hidden_tag()}}
        {{hidden_form.selected_patient_name}}
        <input type="submit" value="add procedure">
    </form>
    <form action={{url_for('add_appointment')}} method="post" id="add_appointment">
        {{hidden_form.hidden_tag()}}
        {{hidden_form.selected_patient_name}}
        
        {{hidden_form.submit(form='add_appointment', value='add appointment')}}
    </form>
    
</section>
{% endblock %}